# Input 输入框组件测试用例

## 组件信息

- **组件名称**: nv-input
- **组件路径**: `src/components/input`
- **测试优先级**: P0 (高优先级)
- **组件描述**: 通过鼠标或键盘输入字符的基础表单组件

## 1. 功能测试

### 1.1 基础渲染

- **测试ID**: `input-basic-render`
- **测试步骤**:
  1. 渲染一个基础输入框
  2. 验证输入框正常显示
  3. 验证可以输入文本
- **预期结果**: 输入框正常渲染，可以输入和显示文本

### 1.2 文本输入

- **测试ID**: `input-text-input`
- **测试步骤**:
  1. 在输入框中输入文本
  2. 验证输入的文本正确显示
  3. 验证 value 属性更新
- **预期结果**: 输入的文本正确显示，value 值正确更新

### 1.3 多行文本输入 (textarea)

- **测试ID**: `input-textarea`
- **测试步骤**:
  1. 设置 type="textarea"
  2. 输入多行文本
  3. 验证文本换行正确显示
- **预期结果**: 多行文本正确显示，支持换行

## 2. 属性测试

### 2.1 type 属性 - 输入框类型

- **测试ID**: `input-type-{value}`
- **测试值**: text, password, textarea, number, email, tel, url
- **测试步骤**:
  1. 设置不同的 type 值
  2. 验证输入框类型正确
  3. 验证对应的输入验证规则
- **预期结果**: 每种类型显示正确的输入框和验证规则

**详细测试用例**:
| type 值 | 测试ID | 预期行为 |
|---------|--------|---------|
| text | input-type-text | 普通文本输入 |
| password | input-type-password | 密码隐藏显示 |
| textarea | input-type-textarea | 多行文本输入 |
| number | input-type-number | 仅允许数字输入 |
| email | input-type-email | 邮箱格式验证 |
| tel | input-type-tel | 电话号码输入 |
| url | input-type-url | URL 格式验证 |

### 2.2 size 属性 - 输入框尺寸

- **测试ID**: `input-size-{value}`
- **测试值**: mini, small, medium, large
- **测试步骤**:
  1. 设置不同的 size 值
  2. 验证输入框尺寸符合预期
- **预期结果**: 输入框尺寸从小到大依次递增

**详细测试用例**:
| size 值 | 测试ID | 预期高度范围 |
|---------|--------|-------------|
| mini | input-size-mini | ~24px |
| small | input-size-small | ~32px |
| medium | input-size-medium | ~36px |
| large | input-size-large | ~40px |

### 2.3 placeholder 属性 - 占位文本

- **测试ID**: `input-placeholder`
- **测试步骤**:
  1. 设置 placeholder 属性
  2. 验证占位文本显示
  3. 输入文本后验证占位文本消失
- **预期结果**: 空值时显示占位文本，有值时占位文本消失

### 2.4 disabled 属性 - 禁用状态

- **测试ID**: `input-disabled`
- **测试步骤**:
  1. 设置 disabled 属性
  2. 验证输入框显示禁用样式
  3. 尝试输入文本
  4. 验证无法输入
- **预期结果**: 输入框显示禁用样式且无法输入

### 2.5 readonly 属性 - 只读状态

- **测试ID**: `input-readonly`
- **测试步骤**:
  1. 设置 readonly 属性
  2. 设置初始值
  3. 尝试修改文本
  4. 验证无法修改
- **预期结果**: 可以选中和复制文本，但无法修改

### 2.6 clearable 属性 - 可清空

- **测试ID**: `input-clearable`
- **测试步骤**:
  1. 设置 clearable 属性
  2. 输入文本
  3. 验证显示清空按钮
  4. 点击清空按钮
  5. 验证文本被清空
- **预期结果**: 有值时显示清空按钮，点击后清空内容

### 2.7 show-password 属性 - 显示密码

- **测试ID**: `input-show-password`
- **测试步骤**:
  1. 设置 type="password" 和 show-password 属性
  2. 输入密码
  3. 验证密码默认隐藏
  4. 点击显示密码按钮
  5. 验证密码明文显示
- **预期结果**: 可以切换密码的显示/隐藏状态

### 2.8 maxlength 属性 - 最大长度

- **测试ID**: `input-maxlength`
- **测试步骤**:
  1. 设置 maxlength="10"
  2. 尝试输入超过 10 个字符
  3. 验证只能输入 10 个字符
- **预期结果**: 输入长度被限制在最大值

### 2.9 minlength 属性 - 最小长度

- **测试ID**: `input-minlength`
- **测试步骤**:
  1. 设置 minlength="5"
  2. 输入少于 5 个字符
  3. 验证显示验证错误
- **预期结果**: 少于最小长度时显示验证错误

### 2.10 prefix 属性 - 前缀图标

- **测试ID**: `input-prefix`
- **测试步骤**:
  1. 设置 prefix 属性或使用 prefix 插槽
  2. 验证前缀内容显示在输入框左侧
- **预期结果**: 前缀内容正确显示

### 2.11 suffix 属性 - 后缀图标

- **测试ID**: `input-suffix`
- **测试步骤**:
  1. 设置 suffix 属性或使用 suffix 插槽
  2. 验证后缀内容显示在输入框右侧
- **预期结果**: 后缀内容正确显示

### 2.12 rows 属性 - textarea 行数

- **测试ID**: `input-rows`
- **测试步骤**:
  1. 设置 type="textarea" 和 rows="5"
  2. 验证 textarea 显示 5 行高度
- **预期结果**: textarea 高度符合设置的行数

### 2.13 autosize 属性 - 自动高度

- **测试ID**: `input-autosize`
- **测试步骤**:
  1. 设置 type="textarea" 和 autosize 属性
  2. 输入多行文本
  3. 验证高度自动调整
- **预期结果**: textarea 高度随内容自动调整

## 3. 事件测试

### 3.1 input 事件

- **测试ID**: `input-event-input`
- **测试步骤**:
  1. 监听 input 事件
  2. 在输入框中输入文本
  3. 验证每次输入都触发事件
  4. 验证事件参数包含当前值
- **预期结果**: 每次输入都触发 input 事件，参数正确

### 3.2 change 事件

- **测试ID**: `input-event-change`
- **测试步骤**:
  1. 监听 change 事件
  2. 输入文本后失去焦点
  3. 验证 change 事件触发
  4. 验证事件参数包含最终值
- **预期结果**: 值改变且失去焦点时触发 change 事件

### 3.3 blur 事件

- **测试ID**: `input-event-blur`
- **测试步骤**:
  1. 监听 blur 事件
  2. 聚焦输入框
  3. 点击输入框外部
  4. 验证 blur 事件触发
- **预期结果**: 失去焦点时触发 blur 事件

### 3.4 focus 事件

- **测试ID**: `input-event-focus`
- **测试步骤**:
  1. 监听 focus 事件
  2. 点击输入框
  3. 验证 focus 事件触发
- **预期结果**: 获得焦点时触发 focus 事件

### 3.5 clear 事件

- **测试ID**: `input-event-clear`
- **测试步骤**:
  1. 设置 clearable 属性
  2. 监听 clear 事件
  3. 输入文本
  4. 点击清空按钮
  5. 验证 clear 事件触发
- **预期结果**: 点击清空按钮时触发 clear 事件

## 4. 状态测试

### 4.1 聚焦状态

- **测试ID**: `input-focus-state`
- **测试步骤**:
  1. 点击输入框
  2. 验证输入框显示聚焦样式（边框高亮）
- **预期结果**: 聚焦时显示高亮边框

### 4.2 禁用状态

- **测试ID**: `input-disabled-state`
- **测试步骤**:
  1. 设置 disabled 属性
  2. 验证输入框显示禁用样式
  3. 验证鼠标悬停时无效果
- **预期结果**: 显示禁用样式，无交互效果

### 4.3 只读状态

- **测试ID**: `input-readonly-state`
- **测试步骤**:
  1. 设置 readonly 属性
  2. 验证输入框可以聚焦
  3. 验证可以选中文本
  4. 验证无法修改文本
- **预期结果**: 可聚焦和选中，但不可修改

### 4.4 验证状态

- **测试ID**: `input-validation-state`
- **测试步骤**:
  1. 设置验证规则
  2. 输入无效值
  3. 验证显示错误状态（红色边框）
  4. 输入有效值
  5. 验证显示成功状态（绿色边框）
- **预期结果**: 根据验证结果显示不同状态样式

## 5. 交互测试

### 5.1 鼠标点击聚焦

- **测试ID**: `input-mouse-focus`
- **测试步骤**:
  1. 使用鼠标点击输入框
  2. 验证输入框获得焦点
  3. 验证光标显示
- **预期结果**: 点击后获得焦点，显示光标

### 5.2 键盘输入

- **测试ID**: `input-keyboard-input`
- **测试步骤**:
  1. 聚焦输入框
  2. 使用键盘输入文本
  3. 验证文本正确显示
- **预期结果**: 键盘输入正常工作

### 5.3 Enter 键提交

- **测试ID**: `input-enter-submit`
- **测试步骤**:
  1. 在输入框中输入文本
  2. 按下 Enter 键
  3. 验证触发提交事件或表单提交
- **预期结果**: Enter 键触发提交（非 textarea）

### 5.4 Escape 键清空

- **测试ID**: `input-escape-clear`
- **测试步骤**:
  1. 在输入框中输入文本
  2. 按下 Escape 键
  3. 验证输入框失去焦点或清空
- **预期结果**: Escape 键清空或失焦

### 5.5 Tab 键导航

- **测试ID**: `input-tab-navigation`
- **测试步骤**:
  1. 聚焦第一个输入框
  2. 按 Tab 键
  3. 验证焦点移到下一个输入框
  4. 按 Shift+Tab
  5. 验证焦点移回上一个输入框
- **预期结果**: Tab 键导航正常工作

### 5.6 文本选择

- **测试ID**: `input-text-selection`
- **测试步骤**:
  1. 输入框中有文本
  2. 双击文本
  3. 验证文本被选中
  4. 使用 Ctrl+A 全选
  5. 验证所有文本被选中
- **预期结果**: 文本选择功能正常

### 5.7 复制粘贴

- **测试ID**: `input-copy-paste`
- **测试步骤**:
  1. 输入文本
  2. 选中文本并复制 (Ctrl+C)
  3. 在另一个输入框粘贴 (Ctrl+V)
  4. 验证文本正确粘贴
- **预期结果**: 复制粘贴功能正常

## 6. 边界测试

### 6.1 空值

- **测试ID**: `input-empty-value`
- **测试步骤**:
  1. 不设置 value 属性
  2. 验证输入框为空
  3. 验证显示 placeholder
- **预期结果**: 空值时显示占位文本

### 6.2 超长文本

- **测试ID**: `input-long-text`
- **测试步骤**:
  1. 输入非常长的文本（1000+ 字符）
  2. 验证文本正确存储
  3. 验证输入框可以滚动查看
- **预期结果**: 超长文本正确处理，可滚动查看

### 6.3 特殊字符

- **测试ID**: `input-special-chars`
- **测试步骤**:
  1. 输入特殊字符 (<, >, &, ", ', /, \)
  2. 验证特殊字符正确显示和存储
  3. 验证没有 XSS 风险
- **预期结果**: 特殊字符正确转义和显示

### 6.4 多语言文本

- **测试ID**: `input-multilingual`
- **测试步骤**:
  1. 输入中文、日文、韩文、阿拉伯文等
  2. 验证文本正确显示
  3. 验证 maxlength 对多字节字符正确计算
- **预期结果**: 多语言文本正确处理

### 6.5 Emoji 表情

- **测试ID**: `input-emoji`
- **测试步骤**:
  1. 输入 Emoji 表情符号
  2. 验证 Emoji 正确显示
  3. 验证 maxlength 对 Emoji 正确计算
- **预期结果**: Emoji 正确显示和计算长度

### 6.6 数字类型边界

- **测试ID**: `input-number-boundary`
- **测试步骤**:
  1. 设置 type="number"
  2. 输入非数字字符
  3. 验证被拒绝或过滤
  4. 输入极大/极小数字
  5. 验证正确处理
- **预期结果**: 数字类型正确验证和处理边界值

### 6.7 maxlength 为 0

- **测试ID**: `input-maxlength-zero`
- **测试步骤**:
  1. 设置 maxlength="0"
  2. 尝试输入文本
  3. 验证行为（可能禁止输入或忽略限制）
- **预期结果**: 合理处理 maxlength=0 的情况

### 6.8 负数 maxlength

- **测试ID**: `input-maxlength-negative`
- **测试步骤**:
  1. 设置 maxlength="-1"
  2. 验证行为（忽略或使用默认值）
- **预期结果**: 忽略无效的 maxlength 值

## 7. 可访问性测试

### 7.1 label 关联

- **测试ID**: `input-label-association`
- **测试步骤**:
  1. 创建 label 元素关联输入框
  2. 点击 label
  3. 验证输入框获得焦点
- **预期结果**: label 和输入框正确关联

### 7.2 ARIA 属性 - disabled

- **测试ID**: `input-aria-disabled`
- **测试步骤**:
  1. 设置 disabled 属性
  2. 验证 aria-disabled="true"
- **预期结果**: 禁用状态有正确的 ARIA 属性

### 7.3 ARIA 属性 - required

- **测试ID**: `input-aria-required`
- **测试步骤**:
  1. 设置 required 属性
  2. 验证 aria-required="true"
- **预期结果**: 必填状态有正确的 ARIA 属性

### 7.4 ARIA 属性 - invalid

- **测试ID**: `input-aria-invalid`
- **测试步骤**:
  1. 输入无效值
  2. 验证 aria-invalid="true"
  3. 输入有效值
  4. 验证 aria-invalid="false"
- **预期结果**: 验证状态有正确的 ARIA 属性

### 7.5 键盘完全可访问

- **测试ID**: `input-keyboard-accessible`
- **测试步骤**:
  1. 仅使用键盘操作输入框
  2. Tab 聚焦、输入文本、清空、提交
  3. 验证所有功能都可用
- **预期结果**: 完全支持键盘操作

### 7.6 屏幕阅读器

- **测试ID**: `input-screen-reader`
- **测试步骤**:
  1. 使用屏幕阅读器
  2. 验证输入框类型、标签、值被正确读取
  3. 验证状态变化被通知
- **预期结果**: 屏幕阅读器正确读取所有信息

## 8. 样式测试

### 8.1 CSS Parts - input

- **测试ID**: `input-part-input`
- **测试步骤**:
  1. 使用 `::part(input)` 选择器
  2. 应用自定义样式
  3. 验证样式生效
- **预期结果**: 可以通过 CSS Parts 自定义输入框样式

### 8.2 CSS Parts - prefix

- **测试ID**: `input-part-prefix`
- **测试步骤**:
  1. 使用 `::part(prefix)` 选择器
  2. 应用自定义样式
  3. 验证样式生效
- **预期结果**: 可以自定义前缀区域样式

### 8.3 CSS Parts - suffix

- **测试ID**: `input-part-suffix`
- **测试步骤**:
  1. 使用 `::part(suffix)` 选择器
  2. 应用自定义样式
  3. 验证样式生效
- **预期结果**: 可以自定义后缀区域样式

### 8.4 CSS 变量

- **测试ID**: `input-css-variables`
- **测试步骤**:
  1. 设置 CSS 变量（如 --nv-input-border-color）
  2. 验证样式变化
- **预期结果**: CSS 变量可以自定义输入框样式

### 8.5 主题色

- **测试ID**: `input-theme-color`
- **测试步骤**:
  1. 修改全局主题色变量
  2. 验证输入框聚焦边框颜色随之变化
- **预期结果**: 输入框颜色跟随主题色

## 9. 性能测试

### 9.1 大量输入框渲染

- **测试ID**: `input-performance-render`
- **测试步骤**:
  1. 渲染 1000 个输入框
  2. 测量渲染时间
- **预期结果**: 渲染时间在可接受范围内（< 1000ms）

### 9.2 快速输入性能

- **测试ID**: `input-performance-typing`
- **测试步骤**:
  1. 快速连续输入大量字符
  2. 验证输入响应流畅
  3. 验证没有丢失字符
- **预期结果**: 快速输入响应流畅，无字符丢失

### 9.3 大文本 textarea 性能

- **测试ID**: `input-performance-large-text`
- **测试步骤**:
  1. 在 textarea 中粘贴 10000+ 字符
  2. 验证渲染和滚动流畅
- **预期结果**: 大文本处理流畅，无卡顿

## 10. 兼容性测试

### 10.1 浏览器兼容性

- **测试环境**: Chrome, Firefox, Safari, Edge
- **测试步骤**:
  1. 在不同浏览器中测试所有功能
  2. 验证表现一致
- **预期结果**: 所有现代浏览器表现一致

### 10.2 移动端兼容性

- **测试ID**: `input-mobile-compatible`
- **测试步骤**:
  1. 在移动设备上测试
  2. 验证虚拟键盘正确弹出
  3. 验证输入框大小适中，易于点击
- **预期结果**: 移动端体验良好

### 10.3 IME 输入法

- **测试ID**: `input-ime-compatible`
- **测试步骤**:
  1. 使用中文、日文等输入法
  2. 验证输入法正常工作
  3. 验证组合字符正确处理
- **预期结果**: 输入法兼容性良好

## 测试覆盖率目标

- **功能覆盖率**: 100%
- **属性覆盖率**: 100%
- **事件覆盖率**: 100%
- **边界情况覆盖率**: ≥ 90%
- **可访问性覆盖率**: 100%

## 自动化测试建议

1. 使用 Puppeteer 进行 E2E 测试
2. 使用 Jest 进行单元测试
3. 使用 Axe 进行可访问性测试
4. 使用 Percy 进行视觉回归测试
5. 在 CI/CD 中自动运行所有测试
